\documentclass{article}
\usepackage{graphicx} % Required for inserting images
\usepackage{amsmath}
\usepackage{circuitikz}
\input{titlepage}
\begin{document}
\newcommand{\Vout}{V_{\text{out}}}
\newcommand{\Vin}{V_{\text{in}}}
\newcommand{\Vusb}{V_{\text{USB}}}
\newcommand{\vout}{v_{\text{out}}}
\newcommand{\vin}{v_{\text{in}}}
\section{Introduction and Objectives}
As part of the Physical Principles of Electronics class, the electrical features of a theoretical capacitor were discussed in detail. This allowed for the prediction both of its transient behaviour while charging under a resistor, and of the attenuation offered to AC signals when part of a low pass $RC$-filter.
\par However, real capacitors and resistors can be qualitatively different from their theoretical counterparts: electrolytic capacitors are polarised, suffer from dielectric absorption, and have imperfect insulation between its conductors. Resistors can have their values fluctuate due to thermal phenomena and deviate from Ohm's law. Furthermore, both of these components are subject to manufacturing tolerances which can impact the agreement between calaculated and measured behaviour. None of this was directly explored in the theoretical lectures, thus justifying these experiments.
\par Therefore, the goal of the experiments was to quantify the difference between the expected and the measured values for the characteristic time and attenuation profiles of a $RC$-filter. Moreover, as the dual nature of the experiments allows for the refinement of the theoretical prediction by using $\tau$ to estimate the attenuation, this was also done to verify if improvement in agreement followed. 
\section{Experimental Method}
For both experiments, it was used a carbon film resistor of resistance ${R = 100 \text{ k}\Omega \pm 5\%}$ and an electrolytic capacitor of capacitance ${C = 1 \text{ }\mu\text{F} \pm 20\%}$. Further details can be found at the respective handouts for Exercise B and C.
\subsection{Transient behaviour}
The circuit was arranged as shown in Figure \ref{fig:transient}. The \textit{LED} was used as a power indicator in accordance with the guide in Exercise B, and its effect in the measurements are negligible. The power was implemented by a standard \textit{USB} supply, whose voltage was measured at $\Vusb = 5.15 \text{ V}$. The switch was a wire which was plugged into the correct breadboard hole in order to close the circuit. Finally the capacitor was manually discharged by shorting its legs between measurements, in order to avoid unintended influences between runs.
\begin{figure}[!htb]
\centering
    \begin{circuitikz}
        \tikzstyle{every node}=[font=\large]
        \draw (5,10.5) to[short] (6.5,10.5);
        \draw (6.5,8.5) to[empty led] (6.5,7);
        \draw (6.5,10.5) to[european resistor,l={ \large 100 k$\Omega$}] (9.5,10.5);
        \draw (9.5,10.5) to[normal open switch] (9.5,8.25);
        \draw (9.5,8.5) to[short, -o] (11.5,8.5) ;
        \draw (6.5,7) to[short] (6.5,6.5);
        \draw (5,6.5) to[short] (6.5,6.5);
        \draw (9.5,8.25) to[curved capacitor,l={ \large 1 $\mu$F}] (9.5,6.5);
        \draw (6.5,6.5) to[short] (9.5,6.5);
        \node at (6.5,10.5) [circ] {};
        \node at (6.5,6.5) [circ] {};
        \draw (6.5,10.5) to[european resistor,l={ \large 10 k$\Omega$}] (6.5,8.5);
        \draw (9.5,6.5) to[short, -o] (11.5,6.5) ;
        \draw [->, >=Stealth] (11.5,7) -- (11.5,8)node[pos=0.5,right, fill=white]{$\Vout$};
        \draw (5,10.5) to[short] (4.25,10.5);
        \draw (5,6.5) to[short] (4.25,6.5);
        \draw (4.25,10.5) to[american voltage source,l={ \large 5 V}] (4.25,6.5);
    \end{circuitikz}
    
    \caption{Circuit diagram with nominal values used to measured the transient response of the filter.}
    \label{fig:transient}
\end{figure}
\par Every run, the capacitor would start discharged and with the switch open. Then, the switch would be closed, and the voltage of the capacitor would be measured by a one-shot oscilloscope through a $1\text{ M}\Omega$ probe, capturing its charging curve.
\subsection{AC attenuation}
For the AC attenuation measurements, the circuit was arranged as show in Figure \ref{fig:ac}. For the supply, it was used the wave generator of the oscilloscope itself, set to an amplitude of $1 \text{ V}$, and a DC offset of $1$ V too, in order to meet the polarity of the capacitor. The probes were set to $10\times1\text{ M} \Omega = 10 \text{ M}\Omega$ of impedance. 
\begin{figure}[!htb]
\centering
    \begin{circuitikz}
        \tikzstyle{every node}=[font=\large]
        
        \draw (4.25,10.5) to[european resistor,l={ \large 100 k$\Omega$}] (9.5,10.5);
        %draw (9.5,10.5) to[short] (9.5,8.25);
        \draw (9.5,10.5) to[short, -o] (11.5,10.5) ;
        
        \draw (4.25,6.5) to[short] (6.5,6.5);
        \draw (9.5,10.5) to[curved capacitor,l={ \large 1 $\mu$F}] (9.5,6.5);
        \draw (6.5,6.5) to[short] (9.5,6.5);
        
        
        \draw (9.5,6.5) to[short, -o] (11.5,6.5) ;
        \draw [->, >=Stealth] (11.5,7) -- (11.5,10)node[pos=0.5,right, fill=white]{$\vout$};
        \draw (4.25, 10.5) to[short, -o] (2.25, 10.5);
        \draw (4.25, 6.5) to[short, -o] (2.25, 6.5);
        \draw [->, >=Stealth] (2.25,7) -- (2.25,10)node[pos=0.5,left, fill=white]{$\vin$};
        
        \draw (4.25,10.5) to[vsourcesin,l={ \large 1 V}] (4.25,6.5);
    \end{circuitikz}
    
    \caption{Circuit diagram with nominal values used to measured the AC response of the filter.}
    \label{fig:ac}
\end{figure}
\par Since what was measured was AC response, there was no need to discahrge the capacitor between runs. For each frequency, the oscilloscope directly measured the AC root-mean-square (RMS) ripple voltage of both $\vin$ and $\vout$ in order to compute the attenuation.
\section{Theory}
\subsection{Charging capacitor}
For a capacitor $C$ charging under a constant power supply $\Vusb$ with a resistor $R$ in series, Kirchhoff laws dictate that
\begin{equation}
    \begin{split}
        \Vusb &= RI + \frac{Q}{C} 
        \\ \implies 0 &= R\dot{I} + \frac{I}{C}
    \end{split}
    \label{eqn:charge}
\end{equation}
Where $Q$ denotes the capacitor's charge at any point in time. The solution of (\ref{eqn:charge}) is straightfoward:
\begin{equation}
    \begin{split}
            I &= Ae^{-t/RC} \\
            \iff \frac{Q}{C} = \Vout &= -RAe^{-t/RC} + B
    \end{split}
    \label{eqn:charge_boundary}
\end{equation}
Now, to get the values for $A$ and $B$ we use the boundary condition of the experiment, namely $\Vout(0) = 0$. Subsituting the first line of (\ref{eqn:charge_boundary}) in the first line of (\ref{eqn:charge}) then gives $A = \Vusb/R$. Further substituting the boundary condition on the second line of (\ref{eqn:charge_boundary}) gives $B = RA = \Vusb$. Therefore, the complete solution for the exercise is:
\begin{equation}
    \Vout(t) = \Vusb\left( 1 - e^{-t/RC}\right)
    \label{eqn:charge_ideal}
\end{equation}
Naturally, $\tau = RC$ is defined as the characteristic time of the system, such that $\Vout(\tau) \approx 0.63 \Vusb$
\par Due to manufacturing tolerances, the value of $\tau$ can be expected to vary between $(1-5\%)\cdot(1-20\%) = 76\%$ and $(1+5\%)\cdot(1+20\%) = 126\%$ of its nominal value. Therefore, substituting the values for the components, we get that
\begin{equation}
    76\text{ ms} \le \tau \le 126 \text { ms}
\end{equation}
for the experiment.
\subsection{AC attenuation}
Let an oscilloscope supply a voltage given by $\vin(t) = A\cos(\omega t) + B$ to a resistor $R$ in series with a capacitor $C$. 
\end{document}
